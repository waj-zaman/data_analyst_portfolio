# Changelog

All notable changes to the "api-embedding-js" project will be documented in this file.

The format is based on [Keep a Changelog](http://keepachangelog.com/en/1.0.0/) and this project
adheres to [Semantic Versioning](http://semver.org/spec/v2.0.0.html).

## [Unreleased]

### Added

- Added `hasAlias` and `aliasValue` attributes to `DataValue`.
- Fixed a bug where calling `applyRangeFilterAsync` with a max or min of 0 would throw an error.

## [3.12.0] - 2024-11-20

### Added

- Added `<theme-parameter>` child elements to TableauPulse which can be added to apply custom themes
  to Tableau Pulse components.
- Added `applyFilterAsync`, `applyFiltersAsync`, `clearFilterAsync`, and `clearFiltersAsync` methods
  to `TableauPulse`.
- Added `FirstInteractive` event to `TableauPulse`.
- Added `FirstPulseMetricSizeKnown` event to `TableauPulse`.
- Added `PulseUrlChanged` event to `TableauPulse`.
- Added `resize` method to `TableauPulse` which can be used to adjust the iframe dimensions after a
  window or container size change.
- Added `getFiltersAsync` to `TableauPulse` which can be used to retrieve the list of
  `CategoricalPulseFilter`s on the Pulse metric.
- Added the `getDomainAsync` method to `CategoricalPulseFilter` which can be used to retrieve the
  available values for the given field of the categorical filter.
- Added `applyTimeDimensionAsync` to `TableauPulse` which can be used to change the time dimension
  on the Pulse metric.
- Added `PulseTimeDimensionChanged` event to `TableauPulse`.
- Added `PulseFiltersChanged` event to `TableauPulse`.
- Added `PulseInsightDiscovered` event to `TableauPulse`.
- Added `timeDimension` attribute to `TableauPulse` which can be used to apply an initial time
  dimension to the Pulse metric.
- Added `addFilter` method to `TableauPulse` which can be used to add initial filters to apply to
  the Pulse metric.
- Added `<pulse-filter>` child element of `<tableau-pulse>` which can be used to add initial filters
  to apply to the Pulse metric.
- Added `getTimeDimensionAsync` to `TableauPulse` which can be used to get the time dimension on the
  Pulse metric.
- Added `clearAllFiltersAsync` to `TableauPulse` which can be used to clear all active filters on
  the Pulse metric.
- Added `PulseError` event to `TableauPulse`.

## [3.11.0] - 2024-7-10

### Added

- Added `resize` method to TableauViz and TableauAuthoringViz which can be used to intelligently
  adjust the iframe dimensions after a window or container size change.
- Added the `iframe-attr-loading` component attribute which allows for specifying the embedded
  iframe's `loading` attribute, enabling lazy loading.
- Added the `iframe-attr-style` component attribute which allows for specifying inline styles on the
  embedded iframe.
- Added the `iframe-attr-class` component attribute and `<iframe-style>` child element which allow
  for specifying additional style selectors on the embedded iframe.

## [3.10.0] - 2024-3-29

### Added

- Fixed a bug to allow a `Field` to have datatype = `DataType.Spatial`
- Added an attribute isGeospatial to `Field`
- Implemented Field.ColumnType
- Added `layout` attribute to `<tableau-pulse>` web component.
- Updated `Workbook.showCustomViewAsync()` signature so its `customViewName` parameter is optional.

## [3.9.0] - 2023-12-11

### Added

- Fixed bug in `getSelectedMarksAsync` which would cause formattedValue to be incorrect in multi
  pane scenarios
- Fixed accessibility issue in `VizImpl` so that screen reader users could distinguish between
  different vizzes embedded on the same page using the iframe title
- Added `getVisualSpecificationAsync` to `worksheet`
- Added Error handling and browser compability checks for all the custom elements
- Published to NPM

## [3.8.0] - 2023-09-15

### Added

- Added support for `setEmbeddingVizStateWithDataModel` and `getEmbeddingVizStateWithDataModel`.
  These are called on the active sheet of an authoring workbook. These commands are used for Tableau
  Pulse General Availability, and are hidden in the documentation.
- Deprecated support `getEmbeddingAbstractQueryWithDataModel` command.
- Added support for `SummaryDataChanged` event.
- Added support for Tableau Pulse `<tableau-pulse>` web component.
- Deprecated support for Ask Data `<tableau-ask-data>` web component.

## [3.7.0] - 2023-06-21

### Added

- Added support for the `getEmbeddingAbstractQueryWithDataModel` command, which is called on the
  active sheet of an authoring workbook. This command is for use in the Tableau Pulse pilot, and is
  hidden in the documentation.

## [3.6.0] - 2023-04-21

### Added

- Added support for VizLoadError Event.
- Added support for Worksheet.getSummaryColumnInfoAsync().
- Added support for Viz.exportDataAync(), Viz.exportCrosstabAsync(), Viz.exportPDFAsync(), &
  Viz.exportPowerPointAsync().

## [3.5.0] - 2023-01-12

### Added

- Added support for `<tableau-ask-data>` web component with Connected App support.
- Deprecated the getSummaryDataAsync() method. Use the getSummaryDataReaderAsync() method instead.
- Added a helper function to DataTableReader for developers who want to handle the data all at once
  (with a 4 million row limit) with getAllPagesAsync.
- Doc update: MarksInfo type and color are not implemented.

## [3.4.0] - 2022-10-04

### Added

- Support for annotating marks added with annotateMarkAsync
- Support for getting all annotations on a worksheet was added with getAnnotationsAsync
- Annotations can now be removed via removeAnnotationAsync
- Add support for DataTableReader to support pagination. Created with getSummaryDataReaderAsync,
  getUnderlyingTableDataReaderAsync, and getLogicalTableDataReaderAsync.

## [3.3.0] - 2022-08-10

### Added

- Add support for Hierarchical Filters
- Add support to initialize Custom Views
- Prevent Viz reload after web component dimension change
- Define default component dimensions based off its parent's dimensions
- Implement size for `SheetInfo`, `Worksheet`, `Dashboard` & `DashboardObject`
- Add support for adding event listeners directly on `tableau-viz`
- Show default dimensions if either the width/height is not defined on the component
- Implement `Workbook.getCustomViewsAsync()`, `Workbook.showCustomViewAsync()`,
  `Workbook.removeCustomViewAsync()`, `Workbook.saveCustomViewAsync()` and
  `Workbook.setActiveCustomViewAsDefaultAsync()` methods
- Implement `CustomView.saveAsync()` method
- Add support for initializing story points
- Fix timing issues with `FirstInteractive` and `FirstVizSizeKnown` events
- Add support for handling custom view events - `CustomViewRemoved`, `CustomViewSaved`,
  `CustomViewSetDefault`
- Implement `StoryPointSwitch` event
- Add support for resizing iframe based on when first sheet size is known
- Dynamic resizing based on browser viewport changes
- Implement `Story.activateStoryPointAsync()`, `Workbook.activateNextStoryPointAsync()`,
  `Workbook.activatePreviousStoryPointAsync()`, `Workbook.revertStoryPointAsync()` methods
- Implement `Sheet.changeSizeAsync()` method
- Implement `Viz.getCurrentSrcAsync()` method for both TableauViz and TableauAuthoringViz
- Implement `Viz.displayDialogAsync(TableauDialogType.Share)`

## [3.2.0] - 2022-05-02

### Added

- Added support for ParameterChanged event
- Added support for Workbook.getParametersAsync() & Workbook.changeParameterValueAsync()
- Added support Viz.exportImageAsync() & Viz.displayDialogAsync(TableauDialogType.ExportWorkbook)
- Added support for ToolbarStateChanged event.
- Introduce `<viz-parameter>` sub tag for setting parameter values at startup.
- Added support for Workbook.activateSheetAsync()
- Added support for UrlAction event
- Added support for TabSwitched event
- Added support for the remaining tableau dialog types for Viz.displayDialogAsync()
- Added support for Workbook.revertAllAsync()
- Added support for Worksheet.renameContextMenuAsync()
- Added support for Filter.getAppliedWorksheets() & Filter.setAppliedWorksheets()
- Added support for Dashboard.getFiltersAsync() and Dashboard.applyDashboardFilterAsync()
- Added support for Worksheet.applyRelativeDateFilterAsync()
- Added support for TableauViz.addFillter()

## [3.1.0] - 2022-01-18

### Added

- Introduce new set of functionality. User can now insert/remove custom context menus into uber
  tooltip on the Viz.
- Package the library as an ES6 module
- Expose enums via the library
- Introduce (beta) `TableauAuthoringViz` (`<tableau-authoring-viz>` custom element) that exposes
  functionality to embed an authoring viz.
- Added (beta) ability to hide edit button and suppress default edit behavior for `TableauViz` and
  `TableauAuthoringViz`
- Added (beta) ability to hide edit in desktop button for `TableauAuthoringViz`
- Added (beta) ability to hide close button for `TableauAuthoringViz`
- Added (beta) functionality to handle `WorkbookPublished`, `WorkbookPublishedAs`,
  `WorkbookReadyToClose`, `EditButtonClicked`, and `EditInDesktopButtonClicked` events
- Added (beta) the ability to automatically parse and switch to the correct mode when setting the
  iframe src attribute.
  - For example, when using a `<tableau-viz>` element, you can pass in an authoring URL and it will
    automatically get converted to a viewing URL (`https://tableau.com/authoring/workbook/sheet` -->
    `https://tableau.com/views/workbook/sheet`).
  - This works in reverse as well: passing in a viewing URL into a `<tableau-authoring-viz>` will
    automatically convert the URL into an authoring URL.
  - Having this automatic conversion is great for the user because they can use the same URL for
    both viewing and authoring modes without having to worry about getting it right.
  - In the past users could pass in an authoring URL into `<tableau-viz>` and it would actually
    display correctly in authoring mode. Now it will still display correctly, but it will
    automatically be in viewing mode. This could be considered a "breaking change", but the fact
    that this behavior was not officially supported or advertised, means that it's not really
    breaking.
  - One additional thing to note... the URL parsing also handles `#/views`, which was problematic in
    the past. Basically, the code is more forgiving now and you can just copy/paste a URL from the
    browser's address bar and use it for embedding. This was a constant customer complaint that the
    URL had to be "just right" in order to work in the past.
- Added ability to refreshData on the Viz object.
- Added ability to redo, undo and revertAll changes on the Viz Object
- Added ability to check, pause, resume and toggle automatic updates
- Added ability to select marks
- Implemented url & isHidden on Sheet & SheetInfo.

## [3.0.0] - 2021-10-14

### Added

- Added TableauViz custom element that provides all of functionality needed for v1 customers to
  migrate to using Embedding API v3.
- Refactored shared code so that EAPI v3 provides access to some filtering & get data functionality.
- Added the ability to listen to 4 events - firstvizsizeknown, firstinteractive,
  markselectionchanged, filterchanged.
- Enabled support for Connected Applications as an additional way to authenticate
- Enabled Telemetry

[unreleased]:
  https://gitlab.tableausoftware.com/extensibility/extensions-and-embedding-api/-/compare/v%2Fembedding%2Fv3.3.0...main
[3.0.0]:
  https://gitlab.tableausoftware.com/extensibility/extensions-and-embedding-api/-/tags/v%2Fembedding%2F3.0.0
[3.1.0]:
  https://gitlab.tableausoftware.com/extensibility/extensions-and-embedding-api/-/tags/v%2Fembedding%2F3.1.0
[3.2.0]:
  https://gitlab.tableausoftware.com/extensibility/extensions-and-embedding-api/-/tags/v%2Fembedding%2Fv3.2.0
[3.3.0]:
  https://gitlab.tableausoftware.com/extensibility/extensions-and-embedding-api/-/tags/v%2Fembedding%2Fv3.3.0
[3.4.0]:
  https://gitlab.tableausoftware.com/extensibility/extensions-and-embedding-api/-/tags/v%2Fembedding%2Fv3.4.0
[3.5.0]:
  https://gitlab.tableausoftware.com/extensibility/extensions-and-embedding-api/-/tags/v%2Fembedding%2Fv3.5.0
