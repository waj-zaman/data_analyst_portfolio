{"version":3,"file":"TableauViz.js","sourceRoot":"","sources":["../../../../src/EmbeddingApi/Components/TableauViz.ts"],"names":[],"mappings":"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","sourcesContent":["import * as Contract from '@tableau/api-external-contract-js';\nimport { TableauDialogType } from '@tableau/api-external-contract-js/lib/src/ExternalContract/Embedding/Enums';\nimport {\n  CustomMarkClickedContextMenuEvent,\n  FilterEvent,\n  NotificationId,\n  StoryPointModel,\n  SummaryDataEvent,\n  UrlActionModel,\n  VisualId,\n} from '@tableau/api-internal-contract-js';\nimport { StoryImpl, TableauError } from '@tableau/api-shared-js';\nimport { CustomMarkContextMenuEvent } from '../Events/CustomMarkContextMenuEvent';\nimport { FilterChangedEvent } from '../Events/FilterChangedEvent';\nimport { MarksSelectedEvent } from '../Events/MarksSelectedEvent';\nimport { ParameterChangedEvent } from '../Events/ParameterChangedEvent';\nimport { StoryPointSwitchedEvent } from '../Events/StoryPointSwitchedEvent';\nimport { SummaryDataChangedEvent } from '../Events/SummaryDataChangedEvent';\nimport { UrlActionEvent } from '../Events/UrlActionEvent';\nimport { EmbeddingUrlMode, createVizUrl } from '../Models/EmbeddingVizUrl';\nimport { Workbook } from '../Models/Workbook';\nimport { WebComponentManager } from '../WebComponentManager';\nimport { AttributeEventType, EventHandlerFn, TableauVizBase, attributeToEnumKey } from './TableauVizBase';\n\n/**\n * Represents the entry point for the `<tableau-viz>` custom HTML element.\n * This class is specifically focused on transferring information between the HTML and\n * the Viz, so it should have as little logic as possible.  Most of the logic should be\n * in {@link VizImpl}.\n */\nexport class TableauViz extends TableauVizBase implements Contract.Viz {\n  // ========================================== Begin Custom Element definition ==========================================\n\n  // This stores filters added via addFilter()\n  private preInitFilters: Contract.FilterParameters[] = [];\n\n  //#region Reactions\n\n  //#region Filters\n  private readFiltersFromChild(): Contract.FilterParameters[] {\n    const filters: Contract.FilterParameters[] = [];\n    [].forEach.call(this.children, (child) => {\n      if (\n        child.localName === Contract.VizChildElements.VizFilter &&\n        !!child.getAttribute(Contract.VizChildElementAttributes.Field) &&\n        child.getAttribute(Contract.VizChildElementAttributes.Value) !== undefined\n      ) {\n        filters.push({\n          field: child.getAttribute(Contract.VizChildElementAttributes.Field),\n          value: child.getAttribute(Contract.VizChildElementAttributes.Value),\n        });\n      }\n    });\n    return filters;\n  }\n  //#endregion Filters\n\n  //#region Parameters\n  private readParametersFromChild(): Contract.VizParameter[] {\n    const params: Contract.VizParameter[] = [];\n    [].forEach.call(this.children, (child) => {\n      if (\n        child.localName === Contract.VizChildElements.VizParameter &&\n        !!child.getAttribute(Contract.VizChildElementAttributes.Name) &&\n        !!child.getAttribute(Contract.VizChildElementAttributes.Value)\n      ) {\n        params.push({\n          name: child.getAttribute(Contract.VizChildElementAttributes.Name),\n          value: child.getAttribute(Contract.VizChildElementAttributes.Value),\n        });\n      }\n    });\n    return params;\n  }\n\n  public static get observedAttributes(): string[] {\n    // Take caution before adding to this list because for every observed attribute change\n    // we unregister and re-render the viz\n    return [...super.observedAttributes, ...Object.values(Contract.VizAttributes)];\n  }\n\n  public disconnectedCallback(): void {\n    this.preInitFilters = [];\n    super.disconnectedCallback();\n  }\n  //#endregion Reaction\n\n  protected createFrameUrlWithParams(): URL {\n    const vizqlOptions = this.constructVizqlOptions();\n    const filters = this.readFiltersFromChild().concat(this.preInitFilters);\n    const params = this.readParametersFromChild();\n    const customParams = this.readCustomParamsFromChildren();\n\n    return createVizUrl(this.src, EmbeddingUrlMode.Viewing, vizqlOptions, this._embeddingIdCounter, filters, params, customParams);\n  }\n\n  private constructVizqlOptions(): Contract.VizSettings {\n    const options: Contract.VizSettings = {\n      disableUrlActionsPopups: this.disableUrlActionsPopups,\n      hideTabs: this.hideTabs,\n      toolbar: this.toolbar,\n      instanceIdToClone: this.instanceIdToClone,\n      device: this.device,\n      token: this.token,\n      touchOptimize: this.touchOptimize,\n      hideEditButton: this.hideEditButton,\n      hideEditInDesktopButton: this.hideEditInDesktopButton,\n      suppressDefaultEditBehavior: this.suppressDefaultEditBehavior,\n      debug: this.debug,\n      iframeAuth: this.iframeAuth,\n    };\n\n    return options;\n  }\n\n  protected getAttributeEvents(): AttributeEventType[] {\n    return [\n      [Contract.VizAttributes.OnCustomMarkContextMenuEvent, Contract.EmbeddingTableauEventType.CustomMarkContextMenuEvent],\n      [Contract.VizAttributes.OnEditButtonClicked, Contract.EmbeddingTableauEventType.EditButtonClicked],\n      [Contract.VizSharedAttributes.OnEditInDesktopButtonClicked, Contract.EmbeddingTableauEventType.EditInDesktopButtonClicked],\n      [Contract.VizAttributes.OnFilterChanged, Contract.EmbeddingTableauEventType.FilterChanged],\n      [Contract.VizSharedAttributes.OnFirstInteractive, Contract.EmbeddingTableauEventType.FirstInteractive],\n      [Contract.VizSharedAttributes.OnFirstVizSizeKnown, Contract.EmbeddingTableauEventType.FirstVizSizeKnown],\n      [Contract.VizAttributes.OnMarkSelectionChanged, Contract.EmbeddingTableauEventType.MarkSelectionChanged],\n      [Contract.VizAttributes.OnParameterChanged, Contract.EmbeddingTableauEventType.ParameterChanged],\n      [Contract.VizAttributes.OnTabSwitched, Contract.EmbeddingTableauEventType.TabSwitched],\n      [Contract.VizAttributes.OnToolbarStateChanged, Contract.EmbeddingTableauEventType.ToolbarStateChanged],\n      [Contract.VizAttributes.OnUrlAction, Contract.EmbeddingTableauEventType.UrlAction],\n      [Contract.VizAttributes.OnCustomViewLoaded, Contract.EmbeddingTableauEventType.CustomViewLoaded],\n      [Contract.VizAttributes.OnCustomViewRemoved, Contract.EmbeddingTableauEventType.CustomViewRemoved],\n      [Contract.VizAttributes.OnCustomViewSaved, Contract.EmbeddingTableauEventType.CustomViewSaved],\n      [Contract.VizAttributes.OnCustomViewSetDefault, Contract.EmbeddingTableauEventType.CustomViewSetDefault],\n      [Contract.VizAttributes.OnStoryPointSwitched, Contract.EmbeddingTableauEventType.StoryPointSwitched],\n      [Contract.VizAttributes.OnSummaryDataChanged, Contract.EmbeddingTableauEventType.SummaryDataChanged],\n      [Contract.VizAttributes.OnReadyToReceiveAuthToken, Contract.EmbeddingTableauEventType.ReadyToReceiveAuthToken],\n    ];\n  }\n\n  protected getRegisteredEvents(): EventHandlerFn[] {\n    return super.getRegisteredEvents().concat([\n      [\n        NotificationId.SelectedMarksChanged,\n        (model: VisualId) => {\n          return this.shouldNotifyEvent(model);\n        },\n        (visualId: VisualId) => this.handleSelectedMarksChangedEvent(visualId),\n      ],\n      [\n        NotificationId.FilterChanged,\n        (model: FilterEvent) => this.shouldNotifyEvent(model.visualId),\n        (event: FilterEvent) => this.handleFilterChangedEvent(event),\n      ],\n      [NotificationId.EditButtonClicked, () => true, () => this.handleEditButtonClicked()],\n      [\n        NotificationId.CustomMarkContextMenuClicked,\n        (model: CustomMarkClickedContextMenuEvent) => {\n          return this.shouldNotifyEvent(model.visualId);\n        },\n        (event: CustomMarkClickedContextMenuEvent) => this.handleCustomMarkClickedContextMenuEvent(event),\n      ],\n      [\n        NotificationId.ParameterChanged,\n        () => true, // Notify for any parameter change across the workbook\n        (fieldName: string) => this.handleParameterChangedEvent(fieldName),\n      ],\n      [NotificationId.UrlAction, () => true, (event: UrlActionModel) => this.handleUrlAction(event)],\n      [NotificationId.StoryPointSwitched, () => true, (event: StoryPointModel) => this.handleStoryPointSwitch(event)],\n      [\n        NotificationId.SummaryDataChanged,\n        (model: SummaryDataEvent) => this.shouldNotifyEvent(model.visualId),\n        (event: SummaryDataEvent) => this.handleSummaryDataChangedEvent(event),\n      ],\n    ]);\n  }\n\n  private shouldNotifyEvent(visualId: VisualId): boolean {\n    switch (this.workbook.activeSheet.sheetType) {\n      case Contract.SheetType.Worksheet:\n        return this.workbook.activeSheet.name === visualId.worksheet;\n      case Contract.SheetType.Dashboard: {\n        const dashboard = this.workbook.activeSheet as Contract.EmbeddingDashboard;\n        const length = dashboard.worksheets.filter((ws) => ws.name === visualId.worksheet).length;\n        return length === 1;\n      }\n      case Contract.SheetType.Story: {\n        const story = this.workbook.activeSheet as Contract.Story;\n        const containedSheet = story.activeStoryPoint.containedSheet;\n        if (!containedSheet) {\n          return false;\n        }\n\n        if (containedSheet.sheetType === Contract.SheetType.Worksheet) {\n          return containedSheet.name === visualId.worksheet;\n        } else if (containedSheet.sheetType === Contract.SheetType.Dashboard) {\n          const dashboard = containedSheet as Contract.EmbeddingDashboard;\n          const length = dashboard.worksheets.filter((ws) => ws.name === visualId.worksheet).length;\n          return length === 1;\n        } else {\n          return false;\n        }\n      }\n      default:\n        return false;\n    }\n  }\n\n  private handleSelectedMarksChangedEvent(visualId: VisualId): void {\n    const event = new MarksSelectedEvent(this.getWorksheetForNotificationHandler(visualId));\n    this.dispatchEvent(new CustomEvent(Contract.EmbeddingTableauEventType.MarkSelectionChanged, { detail: event }));\n  }\n\n  private handleFilterChangedEvent(event: FilterEvent): void {\n    const filterChangeEvent = new FilterChangedEvent(\n      this.getWorksheetForNotificationHandler(event.visualId),\n      event.fieldName,\n      event.fieldId,\n    );\n\n    this.dispatchEvent(new CustomEvent(Contract.EmbeddingTableauEventType.FilterChanged, { detail: filterChangeEvent }));\n  }\n\n  private handleSummaryDataChangedEvent(event: SummaryDataEvent): void {\n    const summaryDataChangedEvent = new SummaryDataChangedEvent(this.getWorksheetForNotificationHandler(event.visualId));\n    this.dispatchEvent(new CustomEvent(Contract.EmbeddingTableauEventType.SummaryDataChanged, { detail: summaryDataChangedEvent }));\n  }\n\n  private handleEditButtonClicked(): void {\n    this.dispatchEvent(new CustomEvent(Contract.EmbeddingTableauEventType.EditButtonClicked));\n  }\n\n  private handleCustomMarkClickedContextMenuEvent(event: CustomMarkClickedContextMenuEvent): void {\n    const customMarkClickedEvent = new CustomMarkContextMenuEvent(\n      this.getWorksheetForNotificationHandler(event.visualId),\n      event.contextMenuId,\n    );\n\n    this.dispatchEvent(new CustomEvent(Contract.EmbeddingTableauEventType.CustomMarkContextMenuEvent, { detail: customMarkClickedEvent }));\n  }\n\n  private handleParameterChangedEvent(fieldName: string) {\n    const event = new ParameterChangedEvent(fieldName, this.vizImpl.embeddingId);\n    this.dispatchEvent(new CustomEvent(Contract.EmbeddingTableauEventType.ParameterChanged, { detail: event }));\n  }\n\n  private handleUrlAction(event: UrlActionModel): void {\n    const urlActionEvent = new UrlActionEvent(event.url, event.target);\n    this.dispatchEvent(new CustomEvent(Contract.EmbeddingTableauEventType.UrlAction, { detail: urlActionEvent }));\n  }\n\n  private handleStoryPointSwitch(newStoryPointModel: StoryPointModel): void {\n    const storyImpl = this.vizImpl.workbookImpl.activeSheet as StoryImpl;\n    const storyPointInfoImpl = storyImpl.storyPointsInfo.find((storyPointInfo) => storyPointInfo.active === true);\n    if (storyImpl.activeStoryPoint && storyPointInfoImpl) {\n      if (storyImpl.activeStoryPoint.index !== newStoryPointModel.index) {\n        storyImpl.updateStory(newStoryPointModel);\n        const storyPointSwitchedEvent = new StoryPointSwitchedEvent(\n          storyPointInfoImpl,\n          storyImpl.activeStoryPoint,\n          this.vizImpl.workbookImpl,\n        );\n        this.dispatchEvent(new CustomEvent(Contract.EmbeddingTableauEventType.StoryPointSwitched, { detail: storyPointSwitchedEvent }));\n      }\n    }\n  }\n\n  private getWorksheetForNotificationHandler(visualId: VisualId): Contract.EmbeddingWorksheet {\n    let worksheet: Contract.EmbeddingWorksheet;\n\n    switch (this.workbook.activeSheet.sheetType) {\n      case Contract.SheetType.Worksheet: {\n        worksheet = this.workbook.activeSheet as Contract.EmbeddingWorksheet;\n        break;\n      }\n\n      case Contract.SheetType.Dashboard: {\n        const dashboard = this.workbook.activeSheet as Contract.EmbeddingDashboard;\n        const worksheetArr = dashboard.worksheets.filter((ws) => ws.name === visualId.worksheet);\n        if (worksheetArr.length === 1) {\n          worksheet = worksheetArr[0];\n        } else {\n          throw new TableauError(Contract.EmbeddingErrorCodes.IndexOutOfRange, 'Worksheet not found');\n        }\n        break;\n      }\n      case Contract.SheetType.Story: {\n        const story = this.workbook.activeSheet as Contract.Story;\n        const containedSheet = story.activeStoryPoint.containedSheet;\n        if (!containedSheet) {\n          throw new TableauError(Contract.EmbeddingErrorCodes.IndexOutOfRange, 'Worksheet not found');\n        }\n\n        if (containedSheet.sheetType === Contract.SheetType.Worksheet) {\n          worksheet = containedSheet as Contract.EmbeddingWorksheet;\n        } else if (containedSheet.sheetType === Contract.SheetType.Dashboard) {\n          const dashboard = containedSheet as Contract.EmbeddingDashboard;\n          const worksheetArr = dashboard.worksheets.filter((ws) => ws.name === visualId.worksheet);\n          if (worksheetArr.length === 1) {\n            worksheet = worksheetArr[0];\n          } else {\n            throw new TableauError(Contract.EmbeddingErrorCodes.IndexOutOfRange, 'Worksheet not found');\n          }\n        } else {\n          throw new TableauError(Contract.EmbeddingErrorCodes.ImplementationError, 'Could not find sheetType');\n        }\n        break;\n      }\n      default:\n        throw new TableauError(Contract.EmbeddingErrorCodes.ImplementationError, 'Could not find sheetType');\n    }\n\n    return worksheet;\n  }\n\n  //#region Simple Getters / Setters\n  public get disableUrlActionsPopups(): boolean {\n    return this.hasAttribute(Contract.VizAttributes.DisableUrlActionsPopups);\n  }\n\n  public set disableUrlActionsPopups(v: boolean) {\n    if (v) {\n      this.setAttribute(Contract.VizAttributes.DisableUrlActionsPopups, '');\n    } else {\n      this.removeAttribute(Contract.VizAttributes.DisableUrlActionsPopups);\n    }\n  }\n\n  public get hideTabs(): boolean {\n    return this.hasAttribute(Contract.VizAttributes.HideTabs);\n  }\n\n  public set hideTabs(v: boolean) {\n    if (v) {\n      this.setAttribute(Contract.VizAttributes.HideTabs, '');\n    } else {\n      this.removeAttribute(Contract.VizAttributes.HideTabs);\n    }\n  }\n  public get toolbar(): Contract.Toolbar {\n    const toolbarKey = attributeToEnumKey(this.getAttribute(Contract.VizAttributes.Toolbar));\n    const position = Contract.Toolbar[toolbarKey];\n    if (!position) {\n      return TableauVizBase.VizAttributeDefaults.toolbar;\n    }\n\n    return position;\n  }\n\n  public set toolbar(v: Contract.Toolbar) {\n    if (v) {\n      this.setAttribute(Contract.VizAttributes.Toolbar, v);\n    }\n  }\n\n  public get instanceIdToClone(): string | undefined {\n    const idToClone = this.getAttribute(Contract.VizAttributes.InstanceIdToClone);\n    if (!idToClone) {\n      return undefined;\n    }\n\n    return idToClone;\n  }\n\n  public set instanceIdToClone(v: string | undefined) {\n    if (v) {\n      this.setAttribute(Contract.VizAttributes.InstanceIdToClone, v);\n    } else {\n      this.removeAttribute(Contract.VizAttributes.InstanceIdToClone);\n    }\n  }\n\n  public get device(): Contract.DeviceType {\n    const deviceKey = attributeToEnumKey(this.getAttribute(Contract.VizAttributes.Device));\n    const device = Contract.DeviceType[deviceKey];\n    if (!device) {\n      return TableauVizBase.VizAttributeDefaults.device; // it was not a valid device type\n    }\n\n    return device;\n  }\n\n  public set device(v: Contract.DeviceType) {\n    this.setAttribute(Contract.VizAttributes.Device, v);\n  }\n\n  public get hideEditButton(): boolean {\n    return this.hasAttribute(Contract.VizAttributes.HideEditButton);\n  }\n\n  public set hideEditButton(v: boolean) {\n    if (v) {\n      this.setAttribute(Contract.VizAttributes.HideEditButton, '');\n    } else {\n      this.removeAttribute(Contract.VizAttributes.HideEditButton);\n    }\n  }\n  //#endregion\n\n  // ========================================== End Custom Element definition ============================================\n\n  // =========================================== Begin Viz Model definiton ===============================================\n\n  public get automaticUpdatesArePaused(): boolean {\n    return this.vizImpl.automaticUpdatesArePaused;\n  }\n\n  public pauseAutomaticUpdatesAsync(): Promise<void> {\n    return this.vizImpl.pauseAutomaticUpdatesAsync();\n  }\n\n  public resumeAutomaticUpdatesAsync(): Promise<void> {\n    return this.vizImpl.resumeAutomaticUpdatesAsync();\n  }\n\n  public toggleAutomaticUpdatesAsync(): Promise<void> {\n    return this.vizImpl.toggleAutomaticUpdatesAsync();\n  }\n\n  public revertAllAsync(): Promise<void> {\n    return this.vizImpl.revertAllAsync();\n  }\n\n  public refreshDataAsync(): Promise<void> {\n    return this.vizImpl.refreshDataAsync();\n  }\n\n  public exportImageAsync(): Promise<void> {\n    return this.vizImpl.exportImageAsync();\n  }\n\n  public exportCrosstabAsync(sheetName: string, format: Contract.CrosstabFileFormat): Promise<void> {\n    return this.vizImpl.exportCrosstabAsync(sheetName, format);\n  }\n\n  public exportDataAsync(sheetName: string, options?: Contract.ExportDataOptions): Promise<void> {\n    return this.vizImpl.exportDataAsync(sheetName, options);\n  }\n\n  public exportPowerPointAsync(sheetNames?: Array<string>): Promise<void> {\n    return this.vizImpl.exportPowerPointAsync(sheetNames);\n  }\n\n  public exportPDFAsync(sheetNames?: Array<string>, options?: Contract.ExportPDFOptions): Promise<void> {\n    return this.vizImpl.exportPDFAsync(sheetNames, options);\n  }\n\n  public displayDialogAsync(dialogType: TableauDialogType): Promise<void> {\n    return this.vizImpl.displayDialogAsync(dialogType);\n  }\n\n  public redoAsync(): Promise<void> {\n    return this.vizImpl.redoAsync();\n  }\n\n  public undoAsync(): Promise<void> {\n    return this.vizImpl.undoAsync();\n  }\n\n  public setAuthToken(token: string): void {\n    this.vizImpl.setAuthToken(token);\n  }\n\n  public addFilter(fieldName: string, value: string): void {\n    this.preInitFilters.push({ field: fieldName, value: value });\n    WebComponentManager.synchronizeRender(this.updateRenderingIfInitialized.bind(this, this.src));\n  }\n\n  /**\n   * This is the public entry point for users to get a reference to the whole data model\n   */\n\n  public get workbook(): Contract.EmbeddingWorkbook {\n    return new Workbook(this.vizImpl.workbookImpl);\n  }\n\n  // =========================================== End Viz Model definiton =================================================\n}\n"]}